(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.imageSmoothingEnabled = false;
const CARD_W = 125;
const CARD_H = 200;
const CARD_GAP = 10;
const CARD_ROWS = 2;
const CARD_COLS = 6;
let cardGrid = new Array(CARD_COLS * CARD_ROWS / 2).fill('');
let compare = [];
let mouseX = 0;
let mouseY = 0;
const cards = [{
  id: 0,
  type: '4 base elements',
  name: 'Earth',
  open: false,
  shown: true
}, {
  id: 1,
  type: '4 base elements',
  name: 'Water',
  open: false,
  shown: true
}, {
  id: 2,
  type: '4 base elements',
  name: 'Air',
  open: false,
  shown: true
}, {
  id: 3,
  type: '4 base elements',
  name: 'Fire',
  open: false,
  shown: true
}, {
  id: 4,
  type: '7 metalls',
  name: 'Aurum',
  open: false,
  shown: true
}, {
  id: 5,
  type: '7 metalls',
  name: 'Argentum',
  open: false,
  shown: true
}, {
  id: 6,
  type: '7 metalls',
  name: 'Cuprum',
  open: false,
  shown: true
}, {
  id: 7,
  type: '7 metalls',
  name: 'Ferrum',
  open: false,
  shown: true
}, {
  id: 8,
  type: '7 metalls',
  name: 'Stannum',
  open: false,
  shown: true
}, {
  id: 9,
  type: '7 metalls',
  name: 'Hydrargyrum',
  open: false,
  shown: true
}, {
  id: 10,
  type: '7 metalls',
  name: 'Plumbum',
  open: false,
  shown: true
}, {
  id: 11,
  type: 'Planets',
  name: 'Sol (Au)',
  open: false,
  shown: true
}, {
  id: 12,
  type: 'Planets',
  name: 'Luna (Ar)',
  open: false,
  shown: true
}, {
  id: 13,
  type: 'Planets',
  name: 'Venus (Cu)',
  open: false,
  shown: true
}, {
  id: 14,
  type: 'Planets',
  name: 'Mars (Fe)',
  open: false,
  shown: true
}, {
  id: 15,
  type: 'Planets',
  name: 'Iupiter (Sn)',
  open: false,
  shown: true
}, {
  id: 16,
  type: 'Planets',
  name: 'Mercurius (Hg)',
  open: false,
  shown: true
}, {
  id: 17,
  type: 'Planets',
  name: 'Saturnus (Pb)',
  open: false,
  shown: true
}, {
  id: 18,
  type: 'Planets',
  name: 'Terra',
  open: false,
  shown: true
}, {
  id: 19,
  type: 'Planets',
  name: 'Uranus',
  open: false,
  shown: true
}, {
  id: 20,
  type: 'Planets',
  name: 'Neptunus',
  open: false,
  shown: true
}, {
  id: 21,
  type: 'Planets',
  name: 'Pluto',
  open: false,
  shown: true
}];

function cardsReset() {
  let i = 0;

  do {
    let randomCard = getRandomCard();

    if (!cardGrid.find(item => item.id === randomCard.id)) {
      cardGrid[i] = randomCard;
      i++;
    }
  } while (i < CARD_COLS * CARD_ROWS / 2);

  cardGrid = messCardsArray(cardGrid.concat(cardGrid.map(object => ({ ...object
  }))));
}

function messCardsArray(arr) {
  var j, temp;

  for (var i = arr.length - 1; i > 0; i--) {
    j = Math.floor(Math.random() * (i + 1));
    temp = arr[j];
    arr[j] = arr[i];
    arr[i] = temp;
  }

  return arr;
}

function getRandomCard() {
  return cards[Math.floor(Math.random() * cards.length)];
}

function rowColToArrayIndex(col, row) {
  return col + CARD_COLS * row;
}

function drawCards() {
  for (let eachRow = 0; eachRow < CARD_ROWS; eachRow++) {
    for (let eachCol = 0; eachCol < CARD_COLS; eachCol++) {
      let arrayIndex = rowColToArrayIndex(eachCol, eachRow);

      if (cardGrid[arrayIndex] && cardGrid[arrayIndex].shown) {
        if (!cardGrid[arrayIndex].open) {
          drawCardBack(CARD_W * eachCol + CARD_GAP * eachCol, CARD_H * eachRow + CARD_GAP * eachRow, CARD_W, CARD_H, 'gray');
        } else {
          drawCardFront(CARD_W * eachCol + CARD_GAP * eachCol, CARD_H * eachRow + CARD_GAP * eachRow, CARD_W, CARD_H, '#eeeeee', cardGrid[arrayIndex]);
        }
      }
    }
  }
}

function drawCardBack(x, y, width, height, color) {
  ctx.beginPath();
  ctx.fillStyle = color;
  ctx.fillRect(x, y, width, height);
  ctx.closePath();
  ctx.fill();
}

function drawCardFront(x, y, width, height, color, card) {
  ctx.beginPath();
  ctx.fillStyle = color;
  ctx.fillRect(x, y, width, height);
  ctx.closePath();
  ctx.fill();
  ctx.beginPath();
  ctx.font = '13px verdana';
  ctx.textAlign = 'center';
  ctx.fillStyle = 'black';
  ctx.fillText(card.type, x + CARD_W / 2, y + 30);
  ctx.font = 'bold 15px verdana';
  ctx.fillText(card.name, x + CARD_W / 2, y + CARD_H - 20);
  ctx.closePath();
}

function drawAll() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawCards();
}

function updateMousePos(evt) {
  const rect = canvas.getBoundingClientRect();
  const root = document.documentElement;
  mouseX = evt.clientX - rect.left - root.scrollLeft;
  mouseY = evt.clientY - rect.top - root.scrollTop;
  let cardColumnGap = mouseX / (CARD_W + CARD_GAP);
  let cardRowGap = mouseY / (CARD_H + CARD_GAP);
  let cardColumn = Math.floor(cardColumnGap);
  let cardRow = Math.floor(cardRowGap);
  let col = cardColumn + (100 - CARD_GAP * 100 / CARD_W) / 100;
  let row = cardRow + (100 - CARD_GAP * 100 / CARD_H) / 100;
  if (col < cardColumnGap || row < cardRowGap) return;
  let cardUnderClick = rowColToArrayIndex(cardColumn, cardRow);

  if (cardColumn >= 0 && cardColumn < CARD_COLS && cardRow >= 0 && cardRow < CARD_ROWS) {
    if (cardGrid[cardUnderClick]) {
      compareCards(cardUnderClick);
      drawAll();
    }
  }
}

function compareCards(card) {
  if (compare.length === 2) return;
  compare.push(card);
  cardGrid[card].open = true;

  if (compare.length === 2) {
    if (cardGrid[compare[0]].id === cardGrid[compare[1]].id) {
      setTimeout(function () {
        // cardGrid[compare[0]].shown = false;
        // cardGrid[compare[1]].shown = false;
        compare = [];
        drawAll();
      }, 1000);
    } else {
      setTimeout(function () {
        cardGrid[compare[0]].open = false;
        cardGrid[compare[1]].open = false;
        compare = [];
        drawAll();
      }, 1000);
    }
  }
}

window.onload = function () {
  canvas.addEventListener('click', updateMousePos);
  cardsReset();
  drawAll();
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJlczYvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBVCxDQUF3QixNQUF4QixDQUFmO0FBQ0EsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBWjtBQUNBLE1BQU0sQ0FBQyxxQkFBUCxHQUErQixLQUEvQjtBQUVBLE1BQU0sTUFBTSxHQUFHLEdBQWY7QUFDQSxNQUFNLE1BQU0sR0FBRyxHQUFmO0FBQ0EsTUFBTSxRQUFRLEdBQUcsRUFBakI7QUFDQSxNQUFNLFNBQVMsR0FBRyxDQUFsQjtBQUNBLE1BQU0sU0FBUyxHQUFHLENBQWxCO0FBQ0EsSUFBSSxRQUFRLEdBQUcsSUFBSSxLQUFKLENBQVUsU0FBUyxHQUFHLFNBQVosR0FBd0IsQ0FBbEMsRUFBcUMsSUFBckMsQ0FBMEMsRUFBMUMsQ0FBZjtBQUNBLElBQUksT0FBTyxHQUFHLEVBQWQ7QUFFQSxJQUFJLE1BQU0sR0FBRyxDQUFiO0FBQ0EsSUFBSSxNQUFNLEdBQUcsQ0FBYjtBQUVBLE1BQU0sS0FBSyxHQUFHLENBQ2Q7QUFBRSxFQUFBLEVBQUUsRUFBRyxDQUFQO0FBQVUsRUFBQSxJQUFJLEVBQUUsaUJBQWhCO0FBQW1DLEVBQUEsSUFBSSxFQUFFLE9BQXpDO0FBQWtELEVBQUEsSUFBSSxFQUFFLEtBQXhEO0FBQStELEVBQUEsS0FBSyxFQUFFO0FBQXRFLENBRGMsRUFFZDtBQUFFLEVBQUEsRUFBRSxFQUFHLENBQVA7QUFBVSxFQUFBLElBQUksRUFBRSxpQkFBaEI7QUFBbUMsRUFBQSxJQUFJLEVBQUUsT0FBekM7QUFBa0QsRUFBQSxJQUFJLEVBQUUsS0FBeEQ7QUFBK0QsRUFBQSxLQUFLLEVBQUU7QUFBdEUsQ0FGYyxFQUdkO0FBQUUsRUFBQSxFQUFFLEVBQUcsQ0FBUDtBQUFVLEVBQUEsSUFBSSxFQUFFLGlCQUFoQjtBQUFtQyxFQUFBLElBQUksRUFBRSxLQUF6QztBQUFnRCxFQUFBLElBQUksRUFBRSxLQUF0RDtBQUE2RCxFQUFBLEtBQUssRUFBRTtBQUFwRSxDQUhjLEVBSWQ7QUFBRSxFQUFBLEVBQUUsRUFBRyxDQUFQO0FBQVUsRUFBQSxJQUFJLEVBQUUsaUJBQWhCO0FBQW1DLEVBQUEsSUFBSSxFQUFFLE1BQXpDO0FBQWlELEVBQUEsSUFBSSxFQUFFLEtBQXZEO0FBQThELEVBQUEsS0FBSyxFQUFFO0FBQXJFLENBSmMsRUFLZDtBQUFFLEVBQUEsRUFBRSxFQUFHLENBQVA7QUFBVSxFQUFBLElBQUksRUFBRSxXQUFoQjtBQUE2QixFQUFBLElBQUksRUFBRSxPQUFuQztBQUE0QyxFQUFBLElBQUksRUFBRSxLQUFsRDtBQUF5RCxFQUFBLEtBQUssRUFBRTtBQUFoRSxDQUxjLEVBTWQ7QUFBRSxFQUFBLEVBQUUsRUFBRyxDQUFQO0FBQVUsRUFBQSxJQUFJLEVBQUUsV0FBaEI7QUFBNkIsRUFBQSxJQUFJLEVBQUUsVUFBbkM7QUFBK0MsRUFBQSxJQUFJLEVBQUUsS0FBckQ7QUFBNEQsRUFBQSxLQUFLLEVBQUU7QUFBbkUsQ0FOYyxFQU9kO0FBQUUsRUFBQSxFQUFFLEVBQUcsQ0FBUDtBQUFVLEVBQUEsSUFBSSxFQUFFLFdBQWhCO0FBQTZCLEVBQUEsSUFBSSxFQUFFLFFBQW5DO0FBQTZDLEVBQUEsSUFBSSxFQUFFLEtBQW5EO0FBQTBELEVBQUEsS0FBSyxFQUFFO0FBQWpFLENBUGMsRUFRZDtBQUFFLEVBQUEsRUFBRSxFQUFHLENBQVA7QUFBVSxFQUFBLElBQUksRUFBRSxXQUFoQjtBQUE2QixFQUFBLElBQUksRUFBRSxRQUFuQztBQUE2QyxFQUFBLElBQUksRUFBRSxLQUFuRDtBQUEwRCxFQUFBLEtBQUssRUFBRTtBQUFqRSxDQVJjLEVBU2Q7QUFBRSxFQUFBLEVBQUUsRUFBRyxDQUFQO0FBQVUsRUFBQSxJQUFJLEVBQUUsV0FBaEI7QUFBNkIsRUFBQSxJQUFJLEVBQUUsU0FBbkM7QUFBOEMsRUFBQSxJQUFJLEVBQUUsS0FBcEQ7QUFBMkQsRUFBQSxLQUFLLEVBQUU7QUFBbEUsQ0FUYyxFQVVkO0FBQUUsRUFBQSxFQUFFLEVBQUcsQ0FBUDtBQUFVLEVBQUEsSUFBSSxFQUFFLFdBQWhCO0FBQTZCLEVBQUEsSUFBSSxFQUFFLGFBQW5DO0FBQWtELEVBQUEsSUFBSSxFQUFFLEtBQXhEO0FBQStELEVBQUEsS0FBSyxFQUFFO0FBQXRFLENBVmMsRUFXZDtBQUFFLEVBQUEsRUFBRSxFQUFFLEVBQU47QUFBVSxFQUFBLElBQUksRUFBRSxXQUFoQjtBQUE2QixFQUFBLElBQUksRUFBRSxTQUFuQztBQUE4QyxFQUFBLElBQUksRUFBRSxLQUFwRDtBQUEyRCxFQUFBLEtBQUssRUFBRTtBQUFsRSxDQVhjLEVBWWQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsVUFBakM7QUFBNkMsRUFBQSxJQUFJLEVBQUUsS0FBbkQ7QUFBMEQsRUFBQSxLQUFLLEVBQUU7QUFBakUsQ0FaYyxFQWFkO0FBQUUsRUFBQSxFQUFFLEVBQUUsRUFBTjtBQUFVLEVBQUEsSUFBSSxFQUFFLFNBQWhCO0FBQTJCLEVBQUEsSUFBSSxFQUFFLFdBQWpDO0FBQThDLEVBQUEsSUFBSSxFQUFFLEtBQXBEO0FBQTJELEVBQUEsS0FBSyxFQUFFO0FBQWxFLENBYmMsRUFjZDtBQUFFLEVBQUEsRUFBRSxFQUFFLEVBQU47QUFBVSxFQUFBLElBQUksRUFBRSxTQUFoQjtBQUEyQixFQUFBLElBQUksRUFBRSxZQUFqQztBQUErQyxFQUFBLElBQUksRUFBRSxLQUFyRDtBQUE0RCxFQUFBLEtBQUssRUFBRTtBQUFuRSxDQWRjLEVBZWQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsV0FBakM7QUFBOEMsRUFBQSxJQUFJLEVBQUUsS0FBcEQ7QUFBMkQsRUFBQSxLQUFLLEVBQUU7QUFBbEUsQ0FmYyxFQWdCZDtBQUFFLEVBQUEsRUFBRSxFQUFFLEVBQU47QUFBVSxFQUFBLElBQUksRUFBRSxTQUFoQjtBQUEyQixFQUFBLElBQUksRUFBRSxjQUFqQztBQUFpRCxFQUFBLElBQUksRUFBRSxLQUF2RDtBQUE4RCxFQUFBLEtBQUssRUFBRTtBQUFyRSxDQWhCYyxFQWlCZDtBQUFFLEVBQUEsRUFBRSxFQUFFLEVBQU47QUFBVSxFQUFBLElBQUksRUFBRSxTQUFoQjtBQUEyQixFQUFBLElBQUksRUFBRSxnQkFBakM7QUFBbUQsRUFBQSxJQUFJLEVBQUUsS0FBekQ7QUFBZ0UsRUFBQSxLQUFLLEVBQUU7QUFBdkUsQ0FqQmMsRUFrQmQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsZUFBakM7QUFBa0QsRUFBQSxJQUFJLEVBQUUsS0FBeEQ7QUFBK0QsRUFBQSxLQUFLLEVBQUU7QUFBdEUsQ0FsQmMsRUFtQmQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsT0FBakM7QUFBMEMsRUFBQSxJQUFJLEVBQUUsS0FBaEQ7QUFBdUQsRUFBQSxLQUFLLEVBQUU7QUFBOUQsQ0FuQmMsRUFvQmQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsUUFBakM7QUFBMkMsRUFBQSxJQUFJLEVBQUUsS0FBakQ7QUFBd0QsRUFBQSxLQUFLLEVBQUU7QUFBL0QsQ0FwQmMsRUFxQmQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsVUFBakM7QUFBNkMsRUFBQSxJQUFJLEVBQUUsS0FBbkQ7QUFBMEQsRUFBQSxLQUFLLEVBQUU7QUFBakUsQ0FyQmMsRUFzQmQ7QUFBRSxFQUFBLEVBQUUsRUFBRSxFQUFOO0FBQVUsRUFBQSxJQUFJLEVBQUUsU0FBaEI7QUFBMkIsRUFBQSxJQUFJLEVBQUUsT0FBakM7QUFBMEMsRUFBQSxJQUFJLEVBQUUsS0FBaEQ7QUFBdUQsRUFBQSxLQUFLLEVBQUU7QUFBOUQsQ0F0QmMsQ0FBZDs7QUF5QkEsU0FBUyxVQUFULEdBQXNCO0FBQ3JCLE1BQUksQ0FBQyxHQUFHLENBQVI7O0FBQ0EsS0FBRztBQUNGLFFBQUksVUFBVSxHQUFHLGFBQWEsRUFBOUI7O0FBQ0EsUUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFULENBQWMsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFMLEtBQVksVUFBVSxDQUFDLEVBQTdDLENBQUwsRUFBdUQ7QUFDdEQsTUFBQSxRQUFRLENBQUMsQ0FBRCxDQUFSLEdBQWMsVUFBZDtBQUNBLE1BQUEsQ0FBQztBQUNEO0FBQ0QsR0FORCxRQU1TLENBQUMsR0FBRyxTQUFTLEdBQUcsU0FBWixHQUF3QixDQU5yQzs7QUFPQSxFQUFBLFFBQVEsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IsUUFBUSxDQUFDLEdBQVQsQ0FBYSxNQUFNLEtBQUssRUFBRSxHQUFHO0FBQUwsR0FBTCxDQUFuQixDQUFoQixDQUFELENBQXpCO0FBQ0E7O0FBRUQsU0FBUyxjQUFULENBQXdCLEdBQXhCLEVBQTZCO0FBQzVCLE1BQUksQ0FBSixFQUFPLElBQVA7O0FBQ0EsT0FBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBSixHQUFhLENBQXpCLEVBQTRCLENBQUMsR0FBRyxDQUFoQyxFQUFtQyxDQUFDLEVBQXBDLEVBQXVDO0FBQ3RDLElBQUEsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQUwsTUFBZSxDQUFDLEdBQUcsQ0FBbkIsQ0FBWCxDQUFKO0FBQ0EsSUFBQSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUQsQ0FBVjtBQUNBLElBQUEsR0FBRyxDQUFDLENBQUQsQ0FBSCxHQUFTLEdBQUcsQ0FBQyxDQUFELENBQVo7QUFDQSxJQUFBLEdBQUcsQ0FBQyxDQUFELENBQUgsR0FBUyxJQUFUO0FBQ0E7O0FBQ0QsU0FBTyxHQUFQO0FBQ0E7O0FBRUQsU0FBUyxhQUFULEdBQXlCO0FBQ3hCLFNBQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQUwsS0FBZ0IsS0FBSyxDQUFDLE1BQWpDLENBQUQsQ0FBWjtBQUNBOztBQUVELFNBQVMsa0JBQVQsQ0FBNEIsR0FBNUIsRUFBaUMsR0FBakMsRUFBc0M7QUFDckMsU0FBTyxHQUFHLEdBQUcsU0FBUyxHQUFHLEdBQXpCO0FBQ0E7O0FBRUQsU0FBUyxTQUFULEdBQXFCO0FBQ3BCLE9BQUksSUFBSSxPQUFPLEdBQUcsQ0FBbEIsRUFBcUIsT0FBTyxHQUFHLFNBQS9CLEVBQTBDLE9BQU8sRUFBakQsRUFBcUQ7QUFDcEQsU0FBSSxJQUFJLE9BQU8sR0FBRyxDQUFsQixFQUFxQixPQUFPLEdBQUcsU0FBL0IsRUFBMEMsT0FBTyxFQUFqRCxFQUFxRDtBQUVwRCxVQUFJLFVBQVUsR0FBRyxrQkFBa0IsQ0FBQyxPQUFELEVBQVUsT0FBVixDQUFuQzs7QUFFQSxVQUFHLFFBQVEsQ0FBQyxVQUFELENBQVIsSUFBd0IsUUFBUSxDQUFDLFVBQUQsQ0FBUixDQUFxQixLQUFoRCxFQUF1RDtBQUN0RCxZQUFJLENBQUMsUUFBUSxDQUFDLFVBQUQsQ0FBUixDQUFxQixJQUExQixFQUFnQztBQUMvQixVQUFBLFlBQVksQ0FBQyxNQUFNLEdBQUcsT0FBVCxHQUFtQixRQUFRLEdBQUcsT0FBL0IsRUFDWCxNQUFNLEdBQUcsT0FBVCxHQUFtQixRQUFRLEdBQUcsT0FEbkIsRUFFWCxNQUZXLEVBRUgsTUFGRyxFQUVLLE1BRkwsQ0FBWjtBQUdBLFNBSkQsTUFJTztBQUNOLFVBQUEsYUFBYSxDQUFDLE1BQU0sR0FBRyxPQUFULEdBQW1CLFFBQVEsR0FBRyxPQUEvQixFQUNaLE1BQU0sR0FBRyxPQUFULEdBQW1CLFFBQVEsR0FBRyxPQURsQixFQUVaLE1BRlksRUFFSixNQUZJLEVBRUksU0FGSixFQUVlLFFBQVEsQ0FBQyxVQUFELENBRnZCLENBQWI7QUFHQTtBQUNEO0FBQ0Q7QUFDRDtBQUNEOztBQUVELFNBQVMsWUFBVCxDQUFzQixDQUF0QixFQUF5QixDQUF6QixFQUE0QixLQUE1QixFQUFtQyxNQUFuQyxFQUEyQyxLQUEzQyxFQUFrRDtBQUNqRCxFQUFBLEdBQUcsQ0FBQyxTQUFKO0FBQ0EsRUFBQSxHQUFHLENBQUMsU0FBSixHQUFnQixLQUFoQjtBQUNBLEVBQUEsR0FBRyxDQUFDLFFBQUosQ0FBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLEtBQW5CLEVBQTBCLE1BQTFCO0FBQ0EsRUFBQSxHQUFHLENBQUMsU0FBSjtBQUNBLEVBQUEsR0FBRyxDQUFDLElBQUo7QUFDQTs7QUFFRCxTQUFTLGFBQVQsQ0FBdUIsQ0FBdkIsRUFBMEIsQ0FBMUIsRUFBNkIsS0FBN0IsRUFBb0MsTUFBcEMsRUFBNEMsS0FBNUMsRUFBbUQsSUFBbkQsRUFBeUQ7QUFDeEQsRUFBQSxHQUFHLENBQUMsU0FBSjtBQUNBLEVBQUEsR0FBRyxDQUFDLFNBQUosR0FBZ0IsS0FBaEI7QUFDQSxFQUFBLEdBQUcsQ0FBQyxRQUFKLENBQWEsQ0FBYixFQUFnQixDQUFoQixFQUFtQixLQUFuQixFQUEwQixNQUExQjtBQUNBLEVBQUEsR0FBRyxDQUFDLFNBQUo7QUFDQSxFQUFBLEdBQUcsQ0FBQyxJQUFKO0FBRUEsRUFBQSxHQUFHLENBQUMsU0FBSjtBQUNBLEVBQUEsR0FBRyxDQUFDLElBQUosR0FBVyxjQUFYO0FBQ0EsRUFBQSxHQUFHLENBQUMsU0FBSixHQUFnQixRQUFoQjtBQUNBLEVBQUEsR0FBRyxDQUFDLFNBQUosR0FBZ0IsT0FBaEI7QUFDQSxFQUFBLEdBQUcsQ0FBQyxRQUFKLENBQWEsSUFBSSxDQUFDLElBQWxCLEVBQXdCLENBQUMsR0FBRyxNQUFNLEdBQUcsQ0FBckMsRUFBd0MsQ0FBQyxHQUFHLEVBQTVDO0FBQ0EsRUFBQSxHQUFHLENBQUMsSUFBSixHQUFXLG1CQUFYO0FBQ0EsRUFBQSxHQUFHLENBQUMsUUFBSixDQUFhLElBQUksQ0FBQyxJQUFsQixFQUF3QixDQUFDLEdBQUcsTUFBTSxHQUFHLENBQXJDLEVBQXdDLENBQUMsR0FBRyxNQUFKLEdBQWEsRUFBckQ7QUFDQSxFQUFBLEdBQUcsQ0FBQyxTQUFKO0FBQ0E7O0FBRUQsU0FBUyxPQUFULEdBQW1CO0FBQ2xCLEVBQUEsR0FBRyxDQUFDLFNBQUosQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBQW9CLE1BQU0sQ0FBQyxLQUEzQixFQUFrQyxNQUFNLENBQUMsTUFBekM7QUFDQSxFQUFBLFNBQVM7QUFDVDs7QUFFRCxTQUFTLGNBQVQsQ0FBd0IsR0FBeEIsRUFBNkI7QUFDNUIsUUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLHFCQUFQLEVBQWI7QUFDQSxRQUFNLElBQUksR0FBRyxRQUFRLENBQUMsZUFBdEI7QUFFQSxFQUFBLE1BQU0sR0FBRyxHQUFHLENBQUMsT0FBSixHQUFjLElBQUksQ0FBQyxJQUFuQixHQUEwQixJQUFJLENBQUMsVUFBeEM7QUFDQSxFQUFBLE1BQU0sR0FBRyxHQUFHLENBQUMsT0FBSixHQUFjLElBQUksQ0FBQyxHQUFuQixHQUF5QixJQUFJLENBQUMsU0FBdkM7QUFFQSxNQUFJLGFBQWEsR0FBRyxNQUFNLElBQUksTUFBTSxHQUFHLFFBQWIsQ0FBMUI7QUFDQSxNQUFJLFVBQVUsR0FBRyxNQUFNLElBQUksTUFBTSxHQUFHLFFBQWIsQ0FBdkI7QUFDQSxNQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBTCxDQUFXLGFBQVgsQ0FBakI7QUFDQSxNQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBTCxDQUFXLFVBQVgsQ0FBZDtBQUVBLE1BQUksR0FBRyxHQUFHLFVBQVUsR0FBRyxDQUFDLE1BQU0sUUFBUSxHQUFHLEdBQVgsR0FBaUIsTUFBeEIsSUFBa0MsR0FBekQ7QUFDQSxNQUFJLEdBQUcsR0FBRyxPQUFPLEdBQUcsQ0FBQyxNQUFNLFFBQVEsR0FBRyxHQUFYLEdBQWlCLE1BQXhCLElBQWtDLEdBQXREO0FBQ0EsTUFBSSxHQUFHLEdBQUcsYUFBTixJQUF1QixHQUFHLEdBQUcsVUFBakMsRUFBNkM7QUFFN0MsTUFBSSxjQUFjLEdBQUcsa0JBQWtCLENBQUMsVUFBRCxFQUFhLE9BQWIsQ0FBdkM7O0FBRUEsTUFBRyxVQUFVLElBQUksQ0FBZCxJQUFtQixVQUFVLEdBQUcsU0FBaEMsSUFDRixPQUFPLElBQUksQ0FEVCxJQUNjLE9BQU8sR0FBRyxTQUQzQixFQUNzQztBQUVyQyxRQUFHLFFBQVEsQ0FBQyxjQUFELENBQVgsRUFBNkI7QUFDNUIsTUFBQSxZQUFZLENBQUMsY0FBRCxDQUFaO0FBQ0EsTUFBQSxPQUFPO0FBQ1A7QUFDRDtBQUNEOztBQUdELFNBQVMsWUFBVCxDQUFzQixJQUF0QixFQUE0QjtBQUMzQixNQUFJLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLENBQXZCLEVBQTBCO0FBQzFCLEVBQUEsT0FBTyxDQUFDLElBQVIsQ0FBYSxJQUFiO0FBQ0EsRUFBQSxRQUFRLENBQUMsSUFBRCxDQUFSLENBQWUsSUFBZixHQUFzQixJQUF0Qjs7QUFFQSxNQUFJLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLENBQXZCLEVBQTBCO0FBQ3pCLFFBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFELENBQVIsQ0FBUixDQUFxQixFQUFyQixLQUE0QixRQUFRLENBQUMsT0FBTyxDQUFDLENBQUQsQ0FBUixDQUFSLENBQXFCLEVBQXJELEVBQXlEO0FBQ3hELE1BQUEsVUFBVSxDQUFDLFlBQVc7QUFDckI7QUFDQTtBQUNBLFFBQUEsT0FBTyxHQUFHLEVBQVY7QUFDQSxRQUFBLE9BQU87QUFDUCxPQUxTLEVBS1AsSUFMTyxDQUFWO0FBTUEsS0FQRCxNQU9PO0FBQ04sTUFBQSxVQUFVLENBQUMsWUFBVztBQUNyQixRQUFBLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBRCxDQUFSLENBQVIsQ0FBcUIsSUFBckIsR0FBNEIsS0FBNUI7QUFDQSxRQUFBLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBRCxDQUFSLENBQVIsQ0FBcUIsSUFBckIsR0FBNEIsS0FBNUI7QUFDQSxRQUFBLE9BQU8sR0FBRyxFQUFWO0FBQ0EsUUFBQSxPQUFPO0FBQ1AsT0FMUyxFQUtQLElBTE8sQ0FBVjtBQU1BO0FBQ0Q7QUFDRDs7QUFHRCxNQUFNLENBQUMsTUFBUCxHQUFnQixZQUFXO0FBQzFCLEVBQUEsTUFBTSxDQUFDLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLGNBQWpDO0FBRUEsRUFBQSxVQUFVO0FBQ1YsRUFBQSxPQUFPO0FBQ1AsQ0FMRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJyk7XHJcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5jYW52YXMuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XHJcblxyXG5jb25zdCBDQVJEX1cgPSAxMjU7XHJcbmNvbnN0IENBUkRfSCA9IDIwMDtcclxuY29uc3QgQ0FSRF9HQVAgPSAxMDtcclxuY29uc3QgQ0FSRF9ST1dTID0gMjtcclxuY29uc3QgQ0FSRF9DT0xTID0gNjtcclxubGV0IGNhcmRHcmlkID0gbmV3IEFycmF5KENBUkRfQ09MUyAqIENBUkRfUk9XUyAvIDIpLmZpbGwoJycpO1xyXG5sZXQgY29tcGFyZSA9IFtdO1xyXG5cclxubGV0IG1vdXNlWCA9IDA7XHJcbmxldCBtb3VzZVkgPSAwO1xyXG5cclxuY29uc3QgY2FyZHMgPSBbXHJcbnsgaWQ6ICAwLCB0eXBlOiAnNCBiYXNlIGVsZW1lbnRzJywgbmFtZTogJ0VhcnRoJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6ICAxLCB0eXBlOiAnNCBiYXNlIGVsZW1lbnRzJywgbmFtZTogJ1dhdGVyJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6ICAyLCB0eXBlOiAnNCBiYXNlIGVsZW1lbnRzJywgbmFtZTogJ0FpcicsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAgMywgdHlwZTogJzQgYmFzZSBlbGVtZW50cycsIG5hbWU6ICdGaXJlJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6ICA0LCB0eXBlOiAnNyBtZXRhbGxzJywgbmFtZTogJ0F1cnVtJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6ICA1LCB0eXBlOiAnNyBtZXRhbGxzJywgbmFtZTogJ0FyZ2VudHVtJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6ICA2LCB0eXBlOiAnNyBtZXRhbGxzJywgbmFtZTogJ0N1cHJ1bScsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAgNywgdHlwZTogJzcgbWV0YWxscycsIG5hbWU6ICdGZXJydW0nLCBvcGVuOiBmYWxzZSwgc2hvd246IHRydWUgfSxcclxueyBpZDogIDgsIHR5cGU6ICc3IG1ldGFsbHMnLCBuYW1lOiAnU3Rhbm51bScsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAgOSwgdHlwZTogJzcgbWV0YWxscycsIG5hbWU6ICdIeWRyYXJneXJ1bScsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAxMCwgdHlwZTogJzcgbWV0YWxscycsIG5hbWU6ICdQbHVtYnVtJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6IDExLCB0eXBlOiAnUGxhbmV0cycsIG5hbWU6ICdTb2wgKEF1KScsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAxMiwgdHlwZTogJ1BsYW5ldHMnLCBuYW1lOiAnTHVuYSAoQXIpJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6IDEzLCB0eXBlOiAnUGxhbmV0cycsIG5hbWU6ICdWZW51cyAoQ3UpJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6IDE0LCB0eXBlOiAnUGxhbmV0cycsIG5hbWU6ICdNYXJzIChGZSknLCBvcGVuOiBmYWxzZSwgc2hvd246IHRydWUgfSxcclxueyBpZDogMTUsIHR5cGU6ICdQbGFuZXRzJywgbmFtZTogJ0l1cGl0ZXIgKFNuKScsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG57IGlkOiAxNiwgdHlwZTogJ1BsYW5ldHMnLCBuYW1lOiAnTWVyY3VyaXVzIChIZyknLCBvcGVuOiBmYWxzZSwgc2hvd246IHRydWUgfSxcclxueyBpZDogMTcsIHR5cGU6ICdQbGFuZXRzJywgbmFtZTogJ1NhdHVybnVzIChQYiknLCBvcGVuOiBmYWxzZSwgc2hvd246IHRydWUgfSxcclxueyBpZDogMTgsIHR5cGU6ICdQbGFuZXRzJywgbmFtZTogJ1RlcnJhJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6IDE5LCB0eXBlOiAnUGxhbmV0cycsIG5hbWU6ICdVcmFudXMnLCBvcGVuOiBmYWxzZSwgc2hvd246IHRydWUgfSxcclxueyBpZDogMjAsIHR5cGU6ICdQbGFuZXRzJywgbmFtZTogJ05lcHR1bnVzJywgb3BlbjogZmFsc2UsIHNob3duOiB0cnVlIH0sXHJcbnsgaWQ6IDIxLCB0eXBlOiAnUGxhbmV0cycsIG5hbWU6ICdQbHV0bycsIG9wZW46IGZhbHNlLCBzaG93bjogdHJ1ZSB9LFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gY2FyZHNSZXNldCgpIHtcclxuXHRsZXQgaSA9IDA7XHJcblx0ZG8ge1xyXG5cdFx0bGV0IHJhbmRvbUNhcmQgPSBnZXRSYW5kb21DYXJkKCk7XHJcblx0XHRpZiAoIWNhcmRHcmlkLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSByYW5kb21DYXJkLmlkKSkge1xyXG5cdFx0XHRjYXJkR3JpZFtpXSA9IHJhbmRvbUNhcmQ7XHJcblx0XHRcdGkrKztcclxuXHRcdH1cclxuXHR9IHdoaWxlIChpIDwgQ0FSRF9DT0xTICogQ0FSRF9ST1dTIC8gMik7XHJcblx0Y2FyZEdyaWQgPSBtZXNzQ2FyZHNBcnJheShjYXJkR3JpZC5jb25jYXQoY2FyZEdyaWQubWFwKG9iamVjdCA9PiAoeyAuLi5vYmplY3QgfSkpKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1lc3NDYXJkc0FycmF5KGFycikge1xyXG5cdHZhciBqLCB0ZW1wO1xyXG5cdGZvcih2YXIgaSA9IGFyci5sZW5ndGggLSAxOyBpID4gMDsgaS0tKXtcclxuXHRcdGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGkgKyAxKSk7XHJcblx0XHR0ZW1wID0gYXJyW2pdO1xyXG5cdFx0YXJyW2pdID0gYXJyW2ldO1xyXG5cdFx0YXJyW2ldID0gdGVtcDtcclxuXHR9XHJcblx0cmV0dXJuIGFycjtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmFuZG9tQ2FyZCgpIHtcclxuXHRyZXR1cm4gY2FyZHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FyZHMubGVuZ3RoKV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJvd0NvbFRvQXJyYXlJbmRleChjb2wsIHJvdykge1xyXG5cdHJldHVybiBjb2wgKyBDQVJEX0NPTFMgKiByb3c7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDYXJkcygpIHtcclxuXHRmb3IobGV0IGVhY2hSb3cgPSAwOyBlYWNoUm93IDwgQ0FSRF9ST1dTOyBlYWNoUm93KyspIHtcclxuXHRcdGZvcihsZXQgZWFjaENvbCA9IDA7IGVhY2hDb2wgPCBDQVJEX0NPTFM7IGVhY2hDb2wrKykge1xyXG5cclxuXHRcdFx0bGV0IGFycmF5SW5kZXggPSByb3dDb2xUb0FycmF5SW5kZXgoZWFjaENvbCwgZWFjaFJvdyk7XHJcblxyXG5cdFx0XHRpZihjYXJkR3JpZFthcnJheUluZGV4XSAmJiBjYXJkR3JpZFthcnJheUluZGV4XS5zaG93bikge1xyXG5cdFx0XHRcdGlmICghY2FyZEdyaWRbYXJyYXlJbmRleF0ub3Blbikge1xyXG5cdFx0XHRcdFx0ZHJhd0NhcmRCYWNrKENBUkRfVyAqIGVhY2hDb2wgKyBDQVJEX0dBUCAqIGVhY2hDb2wsXHJcblx0XHRcdFx0XHRcdENBUkRfSCAqIGVhY2hSb3cgKyBDQVJEX0dBUCAqIGVhY2hSb3csXHJcblx0XHRcdFx0XHRcdENBUkRfVywgQ0FSRF9ILCAnZ3JheScpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkcmF3Q2FyZEZyb250KENBUkRfVyAqIGVhY2hDb2wgKyBDQVJEX0dBUCAqIGVhY2hDb2wsXHJcblx0XHRcdFx0XHRcdENBUkRfSCAqIGVhY2hSb3cgKyBDQVJEX0dBUCAqIGVhY2hSb3csXHJcblx0XHRcdFx0XHRcdENBUkRfVywgQ0FSRF9ILCAnI2VlZWVlZScsIGNhcmRHcmlkW2FycmF5SW5kZXhdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDYXJkQmFjayh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBjb2xvcikge1xyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHguZmlsbFN0eWxlID0gY29sb3I7XHJcblx0Y3R4LmZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG5cdGN0eC5jbG9zZVBhdGgoKTtcclxuXHRjdHguZmlsbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3Q2FyZEZyb250KHgsIHksIHdpZHRoLCBoZWlnaHQsIGNvbG9yLCBjYXJkKSB7XHJcblx0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcclxuXHRjdHguZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcblx0Y3R4LmNsb3NlUGF0aCgpO1xyXG5cdGN0eC5maWxsKCk7XHJcblxyXG5cdGN0eC5iZWdpblBhdGgoKTtcclxuXHRjdHguZm9udCA9ICcxM3B4IHZlcmRhbmEnO1xyXG5cdGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuXHRjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcclxuXHRjdHguZmlsbFRleHQoY2FyZC50eXBlLCB4ICsgQ0FSRF9XIC8gMiwgeSArIDMwKTtcclxuXHRjdHguZm9udCA9ICdib2xkIDE1cHggdmVyZGFuYSc7XHJcblx0Y3R4LmZpbGxUZXh0KGNhcmQubmFtZSwgeCArIENBUkRfVyAvIDIsIHkgKyBDQVJEX0ggLSAyMCk7XHJcblx0Y3R4LmNsb3NlUGF0aCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3QWxsKCkge1xyXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHRkcmF3Q2FyZHMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTW91c2VQb3MoZXZ0KSB7XHJcblx0Y29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRjb25zdCByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuXHRtb3VzZVggPSBldnQuY2xpZW50WCAtIHJlY3QubGVmdCAtIHJvb3Quc2Nyb2xsTGVmdDtcclxuXHRtb3VzZVkgPSBldnQuY2xpZW50WSAtIHJlY3QudG9wIC0gcm9vdC5zY3JvbGxUb3A7XHJcblxyXG5cdGxldCBjYXJkQ29sdW1uR2FwID0gbW91c2VYIC8gKENBUkRfVyArIENBUkRfR0FQKTtcclxuXHRsZXQgY2FyZFJvd0dhcCA9IG1vdXNlWSAvIChDQVJEX0ggKyBDQVJEX0dBUCk7XHJcblx0bGV0IGNhcmRDb2x1bW4gPSBNYXRoLmZsb29yKGNhcmRDb2x1bW5HYXApO1xyXG5cdGxldCBjYXJkUm93ID0gTWF0aC5mbG9vcihjYXJkUm93R2FwKTtcclxuXHJcblx0bGV0IGNvbCA9IGNhcmRDb2x1bW4gKyAoMTAwIC0gQ0FSRF9HQVAgKiAxMDAgLyBDQVJEX1cpIC8gMTAwO1xyXG5cdGxldCByb3cgPSBjYXJkUm93ICsgKDEwMCAtIENBUkRfR0FQICogMTAwIC8gQ0FSRF9IKSAvIDEwMDtcclxuXHRpZiAoY29sIDwgY2FyZENvbHVtbkdhcCB8fCByb3cgPCBjYXJkUm93R2FwKSByZXR1cm47XHJcblxyXG5cdGxldCBjYXJkVW5kZXJDbGljayA9IHJvd0NvbFRvQXJyYXlJbmRleChjYXJkQ29sdW1uLCBjYXJkUm93KTtcclxuXHJcblx0aWYoY2FyZENvbHVtbiA+PSAwICYmIGNhcmRDb2x1bW4gPCBDQVJEX0NPTFMgJiZcclxuXHRcdGNhcmRSb3cgPj0gMCAmJiBjYXJkUm93IDwgQ0FSRF9ST1dTKSB7XHJcblxyXG5cdFx0aWYoY2FyZEdyaWRbY2FyZFVuZGVyQ2xpY2tdKSB7XHJcblx0XHRcdGNvbXBhcmVDYXJkcyhjYXJkVW5kZXJDbGljayk7XHJcblx0XHRcdGRyYXdBbGwoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBjb21wYXJlQ2FyZHMoY2FyZCkge1xyXG5cdGlmIChjb21wYXJlLmxlbmd0aCA9PT0gMikgcmV0dXJuO1xyXG5cdGNvbXBhcmUucHVzaChjYXJkKTtcclxuXHRjYXJkR3JpZFtjYXJkXS5vcGVuID0gdHJ1ZTtcclxuXHJcblx0aWYgKGNvbXBhcmUubGVuZ3RoID09PSAyKSB7XHJcblx0XHRpZiAoY2FyZEdyaWRbY29tcGFyZVswXV0uaWQgPT09IGNhcmRHcmlkW2NvbXBhcmVbMV1dLmlkKSB7XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gY2FyZEdyaWRbY29tcGFyZVswXV0uc2hvd24gPSBmYWxzZTtcclxuXHRcdFx0XHQvLyBjYXJkR3JpZFtjb21wYXJlWzFdXS5zaG93biA9IGZhbHNlO1xyXG5cdFx0XHRcdGNvbXBhcmUgPSBbXTtcclxuXHRcdFx0XHRkcmF3QWxsKCk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRjYXJkR3JpZFtjb21wYXJlWzBdXS5vcGVuID0gZmFsc2U7XHJcblx0XHRcdFx0Y2FyZEdyaWRbY29tcGFyZVsxXV0ub3BlbiA9IGZhbHNlO1xyXG5cdFx0XHRcdGNvbXBhcmUgPSBbXTtcclxuXHRcdFx0XHRkcmF3QWxsKCk7XHJcblx0XHRcdH0sIDEwMDApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1cGRhdGVNb3VzZVBvcyk7XHJcblxyXG5cdGNhcmRzUmVzZXQoKTtcclxuXHRkcmF3QWxsKCk7XHJcbn0iXX0=
